<ng-container *ngIf="sessionObservable | async as session; else loading">
    <mat-toolbar>
        <button [routerLink]="['/sessions']" mat-icon-button>
            <mat-icon>arrow_back</mat-icon>
        </button>
        <span style="flex: 1 1 auto;">{{ session.name }}</span>
    </mat-toolbar>
    <mat-divider></mat-divider>
    <mat-tab-group [selectedIndex]="selectedTab.value"
                   (selectedIndexChange)="selectedTab.setValue($event)">
        <mat-tab label="Session Details">
            <ng-template matTabContent>
                Sesh Details
            </ng-template>
        </mat-tab>
        <mat-tab label="Time Series">
            <ng-template matTabContent>
                <app-session-overview [session]="session"
                                      (pieceChanged)="sessionOverviewPiece.next($event)"></app-session-overview>
            </ng-template>
        </mat-tab>
        <mat-tab label="Metrics">
            <ng-template matTabContent>
                <!--<app-session-overview [session]="session"-->
                                      <!--(pieceChanged)="sessionOverviewPiece.next($event)"></app-session-overview>-->
            </ng-template>
        </mat-tab>
        <mat-tab label="Force Curves">
            <ng-template matTabContent>
                <app-force-curve [pieces]="selectedPieces"></app-force-curve>
            </ng-template>
        </mat-tab>
        <mat-tab label="Angles">
            <ng-template matTabContent>
                <app-angle-plot [pieces]="selectedPieces"></app-angle-plot>
            </ng-template>
        </mat-tab>
    </mat-tab-group>
</ng-container>
<ng-template #loading>
    <div class="no-session">
        <mat-progress-spinner
                color="accent"
                mode="indeterminate">
        </mat-progress-spinner>
        <h3 mat-subheader>Getting Session</h3></div>
</ng-template>

<ng-container *ngIf="(session | async)">
    <!--<div class="details row">-->
        <!--<mat-form-field class="col-xs-12" appearance="fill">-->
            <!--<mat-label>Name</mat-label>-->
            <!--<input matInput type="text" [(ngModel)]="name" (change)="updateName()"/>-->
            <!--<mat-icon matSuffix>edit</mat-icon>-->
        <!--</mat-form-field>-->
    <!--</div>-->
    <div class="analysis">
        <!--<div class="pieces">-->
            <!--<mat-list *ngIf="selectedTab.value === 0">-->
                <!--<h3 mat-subheader>Currently Selected</h3>-->
                <!--<mat-list-item>-->
                    <!--<input type="text" matInput-->
                           <!--autocomplete="off"-->
                           <!--[placeholder]="selectedPiecePlaceholder | async"-->
                           <!--[formControl]="selectedPieceControl"/>-->
                    <!--<button matSuffix mat-icon-button (click)="savePiece()" color="accent">-->
                        <!--<mat-icon>save</mat-icon>-->
                    <!--</button>-->
                <!--</mat-list-item>-->
                <!--<h3 mat-subheader>Saved</h3>-->
                <!--<mat-list-item *ngFor="let piece of pieces | async">-->
                    <!--<input type="text" matInput-->
                           <!--[autocomplete]="false"-->
                           <!--(change)="updatePiece(piece)"-->
                           <!--[(ngModel)]="piece.name"/>-->
                    <!--<button matSuffix mat-icon-button (click)="deletePiece(piece)" color="warn">-->
                        <!--<mat-icon>delete</mat-icon>-->
                    <!--</button>-->
                    <!--<button matSuffix mat-icon-button (click)="viewPieceInOverview(piece)" color="primary">-->
                        <!--<mat-icon>keyboard_arrow_right</mat-icon>-->
                    <!--</button>-->
                <!--</mat-list-item>-->
            <!--</mat-list>-->
            <!--<mat-selection-list *ngIf="selectedTab.value !== 0" (selectionChange)="pieceSelection($event)">-->
                <!--<h3 mat-subheader>Saved</h3>-->
                <!--<mat-list-option *ngFor="let piece of pieces | async" [value]="piece"-->
                                 <!--[selected]="(selectedPieceIds | async).indexOf(piece.id) > -1">-->
                    <!--{{ piece.name }}-->
                <!--</mat-list-option>-->
            <!--</mat-selection-list>-->
            <!--<mat-divider [vertical]="true"></mat-divider>-->
        <!--</div>-->
        <mat-tab-group [selectedIndex]="selectedTab.value" (selectedIndexChange)="selectedTab.setValue($event)">
            <mat-tab label="Session Overview">
                <ng-template matTabContent>
                    <app-session-overview [session]="session"
                                          (pieceChanged)="sessionOverviewPiece.next($event)"></app-session-overview>
                </ng-template>
            </mat-tab>
            <mat-tab label="Force Curves">
                <ng-template matTabContent>
                    <app-force-curve [pieces]="selectedPieces"></app-force-curve>
                </ng-template>
            </mat-tab>
            <mat-tab label="Angles">
                <ng-template matTabContent>
                    <app-angle-plot [pieces]="selectedPieces"></app-angle-plot>
                </ng-template>
            </mat-tab>
        </mat-tab-group>
    </div>
</ng-container>
